{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "name": {
      "value": "ReliabilityWorkbookServiceAlert"
    },
    "serializedData": {
      "value": "{\n    \"version\": \"Notebook/1.0\",\n    \"items\": [\n      {\n        \"type\": 9,\n        \"content\": {\n            \"version\": \"KqlParameterItem/1.0\",\n            \"parameters\": [\n            {\n                \"id\": \"aa0176d8-14ff-4dc5-9ae7-b8029f565674\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"Subscriptions\",\n                \"type\": 6,\n                \"isRequired\": true,\n                \"multiSelect\": true,\n                \"quote\": \"'\",\n                \"delimiter\": \",\",\n                \"typeSettings\": {\n                \"additionalResourceOptions\": [\n                    \"value::all\"\n                ],\n                \"includeAll\": true,\n                \"showDefault\": false\n                },\n                \"defaultValue\": \"value::all\",\n                \"value\": [\n                \"value::all\"\n                ]\n            },\n            {\n                \"id\": \"91aa9ba3-ed60-4472-8dd9-1c2cb6255757\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"ResourceGroup\",\n                \"label\": \"Resource Group\",\n                \"type\": 2,\n                \"isRequired\": true,\n                \"multiSelect\": true,\n                \"quote\": \"'\",\n                \"delimiter\": \",\",\n                \"query\": \"resources\\r\\n| distinct resourceGroup\",\n                \"crossComponentResources\": [\n                \"{Subscriptions}\"\n                ],\n                \"typeSettings\": {\n                \"additionalResourceOptions\": [\n                    \"value::all\"\n                ],\n                \"showDefault\": false\n                },\n                \"defaultValue\": \"value::all\",\n                \"queryType\": 1,\n                \"resourceType\": \"microsoft.resourcegraph/resources\"\n            },\n            {\n                \"id\": \"5a4f6d34-9f89-4ef8-b4ee-fb0580ec016d\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"Environment\",\n                \"type\": 2,\n                \"multiSelect\": true,\n                \"quote\": \"'\",\n                \"delimiter\": \",\",\n                \"query\": \"resources\\r\\n| extend Environment = case(\\r\\ntags.Environment \u003c\u003e \\\"\\\", tags.Environment,\\r\\ntags.environment \u003c\u003e \\\"\\\", tags.environment,\\r\\ntags.Env \u003c\u003e \\\"\\\", tags.Env,\\r\\ntags.env \u003c\u003e \\\"\\\", tags.env,\\r\\ntolower(name) contains \\\"prod\\\", \\\"Production\\\",\\r\\ntolower(name) contains \\\"dev\\\", \\\"Development\\\",\\r\\ntolower(name) contains \\\"qa\\\", \\\"QA\\\",\\r\\ntolower(name) contains \\\"uat\\\", \\\"UAT\\\",\\r\\ntolower(name) contains \\\"sit\\\", \\\"SIT\\\",\\r\\ntolower(name) contains \\\"test\\\", \\\"Test\\\",\\r\\n\\\"Undefined\\\")\\r\\n| distinct Environment\",\n                \"crossComponentResources\": [\n                \"{Subscriptions}\"\n                ],\n                \"typeSettings\": {\n                \"additionalResourceOptions\": [\n                    \"value::all\"\n                ]\n                },\n                \"defaultValue\": \"value::all\",\n                \"queryType\": 1,\n                \"resourceType\": \"microsoft.resourcegraph/resources\"\n            },\n            {\n                \"id\": \"9d6afcdc-172c-4bef-8bab-dc372c5d3bb4\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"TagName\",\n                \"label\": \"Tag Name\",\n                \"type\": 2,\n                \"query\": \"Resources\\r\\n| where tags != '' and tags != '[]'\\r\\n| mvexpand tags\\r\\n| extend tagName = tostring(bag_keys(tags)[0])\\r\\n| distinct tagName\\r\\n| sort by tagName asc\",\n                \"crossComponentResources\": [\n                \"{Subscriptions}\"\n                ],\n                \"typeSettings\": {\n                \"additionalResourceOptions\": []\n                },\n                \"queryType\": 1,\n                \"resourceType\": \"microsoft.resourcegraph/resources\",\n                \"value\": null\n            },\n            {\n                \"id\": \"95781001-338b-4ed3-81dc-ce16f2a98bf0\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"TagValue\",\n                \"label\": \"Tag Value\",\n                \"type\": 2,\n                \"query\": \"Resources\\r\\n| mvexpand tags\\r\\n| extend tagName = tostring(bag_keys(tags)[0])\\r\\n| extend tagValue = tostring(tags[tagName])\\r\\n| where tags != '' and tags != '[]' and tostring(bag_keys(tags)[0]) == '{TagName}'\\r\\n| distinct tagValue\\r\\n| sort by tagValue asc\",\n                \"crossComponentResources\": [\n                \"{Subscriptions}\"\n                ],\n                \"typeSettings\": {\n                \"additionalResourceOptions\": []\n                },\n                \"queryType\": 1,\n                \"resourceType\": \"microsoft.resourcegraph/resources\",\n                \"value\": null\n            },\n            {\n                \"id\": \"e929bc01-08ec-45fe-bc6a-4e0267460dfa\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"SLA\",\n                \"label\": \"Show SLA\",\n                \"type\": 10,\n                \"description\": \"This will show the SLA information for the focus area\",\n                \"isRequired\": true,\n                \"typeSettings\": {\n                \"additionalResourceOptions\": [],\n                \"showDefault\": false\n                },\n                \"jsonData\": \"[{ \\\"value\\\": \\\"Yes\\\", \\\"label\\\": \\\"Yes\\\", \\\"selected\\\":true},\\r\\n {\\\"value\\\": \\\"No\\\", \\\"label\\\": \\\"No\\\"}]\"\n            },\n            {\n                \"id\": \"9581cbc6-0f0f-42be-8ae8-6fe94de00ab8\",\n                \"version\": \"KqlParameterItem/1.0\",\n                \"name\": \"Help\",\n                \"label\": \"Show Help\",\n                \"type\": 10,\n                \"isRequired\": true,\n                \"typeSettings\": {\n                \"additionalResourceOptions\": []\n                },\n                \"jsonData\": \"[{\\\"value\\\": \\\"Yes\\\", \\\"label\\\": \\\"Yes\\\", \\\"selected\\\":true },\\r\\n {\\\"value\\\": \\\"No\\\", \\\"label\\\": \\\"No\\\"}]\"\n            }\n            ],\n            \"style\": \"pills\",\n            \"queryType\": 0,\n            \"resourceType\": \"microsoft.operationalinsights/workspaces\"\n        },\n        \"name\": \"parameters - 13\"\n        },\n        {\n          \"type\": 12,\n          \"content\": {\n            \"version\": \"NotebookGroup/1.0\",\n            \"groupType\": \"editable\",\n            \"items\": [\n              {\n                \"type\": 1,\n                \"content\": {\n                  \"json\": \"Service Health alerts    allow customers to receive an alert when Azure sends service health    notifications to their Azure Subscription. \\r\\n\\r\\nAlerts can be configured based    on the class of notifications, the subscriptions affected, services    affected, and the region affected.    \\r\\n\\r\\nThe classes of    notification are:\\r\\n\\r\\n- **Service Issues** - Problems in the    Azure Services that affect you right now. \\r\\n- **Planned Maintenance** - Upcoming    Maintenance that can affect the availability of your services in the    future. \\r\\n- **Health Advisories** - Changes in    Azure Services that require your attention. Examples include deprecation    of Azure Feature or upgrade requirements (e.g., upgrade to a supported    PHP framework)Â·\\r\\n- **Security Advisories    -** Security related notifications or violations that may affect    the availability of your Azure Services.\\r\\n\\r\\nLearn More: [Documentation](https://docs.microsoft.com/en-us/azure/service-health/alerts-activity-log-service-notifications-portal)           \",\n                  \"style\": \"info\"\n                },\n              \"conditionalVisibility\": {\n                \"parameterName\": \"Help\",\n                \"comparison\": \"isEqualTo\",\n                \"value\": \"Yes\"\n              },\n              \"name\": \"alert-help\"\n              },\n              {\n                \"type\": 3,\n                \"content\": {\n                  \"version\": \"KqlItem/1.0\",\n                  \"query\": \"resources\\n| distinct subscriptionId\\n| join kind=leftouter(\\n    resources\\n    | where type == \\\"microsoft.insights/activitylogalerts\\\"\\n    | mv-expand category = properties.condition.allOf\\n    | extend category = category.equals, alertEnabled = properties.enabled\\n    | where category == \\\"ServiceHealth\\\" and alertEnabled == \\\"true\\\"\\n    | extend incidentType = iff(isnull(properties.condition.allOf[1]), \\\"All\\\", properties.condition.allOf)\\n    | extend incident = iff(incidentType contains \\\"Incident\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend maintenance = iff(incidentType contains \\\"Maintenance\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend informational = iff(incidentType contains \\\"Informational\\\" or incidentType contains \\\"ActionRequired\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend security = iff(incidentType contains \\\"Security\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | project id, name, subscriptionId, category, alertEnabled, incident, maintenance, informational, security\\n    | summarize count_alertEnabled=countif(alertEnabled == \\\"true\\\"), count_incident=countif(incident == \\\"true\\\"), count_maintenance=countif(maintenance == \\\"true\\\"), count_informational=countif(informational == \\\"true\\\"), count_security=countif(security == \\\"true\\\") by subscriptionId\\n    )\\n    on subscriptionId\\n| project subscriptionId, alertEnabled=iff(isnotnull(count_alertEnabled), count_alertEnabled, 0), incident=iff(isnotnull(count_incident), count_incident, 0), maintenance=iff(isnotnull(count_maintenance), count_maintenance, 0), informational=iff(isnotnull(count_informational), count_informational, 0), security=iff(isnotnull(count_security), count_security, 0)\\n| summarize Sub_Count=count(subscriptionId), Sub_alertEnabled_count=countif(alertEnabled \\u003e 0), Sub_Incident_Count=countif(incident \\u003e 0), Sub_Maintenance_Count=countif(maintenance \\u003e 0), Sub_Informational_Count=countif(informational \\u003e 0), Sub_Security_Count=countif(security \\u003e 0)\",\n                  \"size\": 4,\n                  \"title\": \"Service Health Alert Configuration - Overall Summary\",\n                  \"showExportToExcel\": true,\n                  \"queryType\": 1,\n                  \"resourceType\": \"microsoft.resourcegraph/resources\",\n                  \"crossComponentResources\": [\n                    \"{Subscriptions}\"\n                  ],\n                  \"gridSettings\": {\n                \"formatters\": [\n                  {\n                    \"columnMatch\": \"Sub_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"columnMatch\": \"Sub_alertEnabled_count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"columnMatch\": \"Sub_Incident_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"columnMatch\": \"Sub_Maintenance_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"columnMatch\": \"Sub_Informational_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                    \"columnMatch\": \"Sub_Security_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  }\n                ],\n                    \"rowLimit\": 10000,\n                    \"labelSettings\": [\n                      {\n                        \"columnId\": \"Sub_Count\",\n                        \"label\": \"Total Subscription\"\n                      },\n                      {\n                        \"columnId\": \"Sub_alertEnabled_count\",\n                    \"label\": \"Alert Enabled\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Incident_Count\",\n                    \"label\": \"Service Issues\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Maintenance_Count\",\n                    \"label\": \"Planned Maintenance\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Informational_Count\",\n                    \"label\": \"Health Advisories\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Security_Count\",\n                    \"label\": \"Security Advisories\"\n                      }\n                    ]\n                  }\n                },\n                \"name\": \"Aggregate Summary\"\n              },\n              {\n                \"type\": 3,\n                \"content\": {\n                  \"version\": \"KqlItem/1.0\",\n                  \"query\": \"resources\\n| distinct subscriptionId\\n| join kind=leftouter(\\n    resources\\n    | where type == \\\"microsoft.insights/activitylogalerts\\\"    \\n    | mv-expand category = properties.condition.allOf\\n    | extend category = category.equals, alertEnabled = properties.enabled\\n    | where category == \\\"ServiceHealth\\\" and alertEnabled == \\\"true\\\"\\n    | extend incidentType = iff(isnull(properties.condition.allOf[1]), \\\"All\\\", properties.condition.allOf)\\n    | extend incident = iff(incidentType contains \\\"Incident\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend maintenance = iff(incidentType contains \\\"Maintenance\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend informational = iff(incidentType contains \\\"Informational\\\" or incidentType contains \\\"ActionRequired\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend security = iff(incidentType contains \\\"Security\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | project id, name, subscriptionId, category, alertEnabled, incident, maintenance, informational, security\\n    | summarize count_alertEnabled=countif(alertEnabled == \\\"true\\\"), count_incident=countif(incident == \\\"true\\\"), count_maintenance=countif(maintenance == \\\"true\\\"), count_informational=countif(informational == \\\"true\\\"), count_security=countif(security == \\\"true\\\") by subscriptionId\\n    )\\n    on subscriptionId\\n| project subscriptionId, alertEnabled=iff(isnotnull(count_alertEnabled), count_alertEnabled, 0), incident=iff(isnotnull(count_incident), count_incident, 0), maintenance=iff(isnotnull(count_maintenance), count_maintenance, 0), informational=iff(isnotnull(count_informational), count_informational, 0), security=iff(isnotnull(count_security), count_security, 0)\\n| summarize Sub_Count=count(subscriptionId), Sub_alertEnabled_count=countif(alertEnabled \\u003e 0) * 100.0 / count(subscriptionId), Sub_Incident_Count=countif(incident \\u003e 0) * 100.0 / count(subscriptionId), Sub_Maintenance_Count=countif(maintenance \\u003e 0) * 100.0 / count(subscriptionId), Sub_Informational_Count=countif(informational \\u003e 0) * 100.0 / count(subscriptionId), Sub_Security_Count=countif(security \\u003e 0) * 100.0 / count(subscriptionId)\",\n                  \"size\": 4,\n                  \"title\": \"Service Health Alert Configuration - Overall percentage summary \",\n                  \"showExportToExcel\": true,\n                  \"queryType\": 1,\n                  \"resourceType\": \"microsoft.resourcegraph/resources\",\n                  \"crossComponentResources\": [\n                    \"{Subscriptions}\"\n                  ],\n                  \"gridSettings\": {\n                    \"formatters\": [\n                      {\n                    \"columnMatch\": \"Sub_Count\",\n                    \"formatter\": 18,\n                    \"formatOptions\": {\n                      \"thresholdsOptions\": \"icons\",\n                      \"thresholdsGrid\": [\n                        {\n                          \"operator\": \"Default\",\n                          \"thresholdValue\": null,\n                          \"representation\": \"Blank\",\n                          \"text\": \"{0}{1}\"\n                        }\n                      ]\n                    }\n                  },\n                  {\n                        \"columnMatch\": \"Sub_alertEnabled_count\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"\u003c\",\n                              \"thresholdValue\": \"100\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        },\n                        \"numberFormat\": {\n                          \"unit\": 1,\n                          \"options\": {\n                            \"style\": \"decimal\",\n                            \"maximumFractionDigits\": 2\n                          }\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"Sub_Incident_Count\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"\u003c\",\n                              \"thresholdValue\": \"100\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        },\n                        \"numberFormat\": {\n                          \"unit\": 1,\n                          \"options\": {\n                            \"style\": \"decimal\",\n                            \"maximumFractionDigits\": 2\n                          }\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"Sub_Maintenance_Count\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"\u003c\",\n                              \"thresholdValue\": \"100\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        },\n                        \"numberFormat\": {\n                          \"unit\": 1,\n                          \"options\": {\n                            \"style\": \"decimal\",\n                            \"maximumFractionDigits\": 2\n                          }\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"Sub_Informational_Count\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"\u003c\",\n                              \"thresholdValue\": \"100\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        },\n                        \"numberFormat\": {\n                          \"unit\": 1,\n                          \"options\": {\n                            \"style\": \"decimal\",\n                            \"maximumFractionDigits\": 2\n                          }\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"Sub_Security_Count\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"\u003c\",\n                              \"thresholdValue\": \"100\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        },\n                        \"numberFormat\": {\n                          \"unit\": 1,\n                          \"options\": {\n                            \"style\": \"decimal\",\n                            \"maximumFractionDigits\": 2\n                          }\n                        }\n                      }\n                    ],\n                    \"rowLimit\": 10000,\n                    \"labelSettings\": [\n                      {\n                        \"columnId\": \"Sub_Count\",\n                        \"label\": \"Total Subscription\"\n                      },\n                      {\n                        \"columnId\": \"Sub_alertEnabled_count\",\n                    \"label\": \"Alert Enabled\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Incident_Count\",\n                    \"label\": \"Service Issues\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Maintenance_Count\",\n                    \"label\": \"Planned Maintenance\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Informational_Count\",\n                    \"label\": \"Health Advisories\"\n                      },\n                      {\n                        \"columnId\": \"Sub_Security_Count\",\n                    \"label\": \"Security Advisories\"\n                      }\n                    ]\n                  }\n                },\n                \"name\": \"Aggregate Summary Percentage\"\n              },\n              {\n                \"type\": 3,\n                \"content\": {\n                  \"version\": \"KqlItem/1.0\",\n                  \"query\": \"resources\\n| distinct subscriptionId\\n| join kind=leftouter(\\n    resources\\n    | where type == \\\"microsoft.insights/activitylogalerts\\\"\\n    | mv-expand category = properties.condition.allOf\\n    | extend category = category.equals, alertEnabled = properties.enabled\\n    | where category == \\\"ServiceHealth\\\" and alertEnabled == \\\"true\\\"\\n    | extend incidentType = iff(isnull(properties.condition.allOf[1]), \\\"All\\\", properties.condition.allOf)\\n    | extend incident = iff(incidentType contains \\\"Incident\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend maintenance = iff(incidentType contains \\\"Maintenance\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | extend informational = iff(incidentType contains \\\"Informational\\\" or incidentType contains \\\"ActionRequired\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")    \\n    | extend security = iff(incidentType contains \\\"Security\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n    | project id, name, subscriptionId, category, alertEnabled, incident, maintenance, informational, security\\n    | summarize count_alertEnabled=countif(alertEnabled == \\\"true\\\"), count_incident=countif(incident == \\\"true\\\"), count_maintenance=countif(maintenance == \\\"true\\\"), count_informational=countif(informational == \\\"true\\\"), count_security=countif(security == \\\"true\\\") by subscriptionId) \\n    on subscriptionId\\n| project subscriptionId, alertEnabled=iff(isnotnull(count_alertEnabled), count_alertEnabled, 0), incident=iff(isnotnull(count_incident), count_incident, 0), maintenance=iff(isnotnull(count_maintenance), count_maintenance, 0), informational=iff(isnotnull(count_informational), count_informational, 0), security=iff(isnotnull(count_security), count_security, 0)\\n| order by incident, maintenance, informational, security desc\",\n                  \"size\": 0,\n                  \"title\": \"Service Health Alert Configuration Summary by Subscription\",\n                  \"showExportToExcel\": true,\n                  \"queryType\": 1,\n                  \"resourceType\": \"microsoft.resourcegraph/resources\",\n                  \"crossComponentResources\": [\n                    \"{Subscriptions}\"\n                  ],\n                  \"gridSettings\": {\n                    \"formatters\": [\n                      {\n                      \"columnMatch\": \"subscriptionId\",\n                      \"formatter\": 13,\n                        \"formatOptions\": {\n                        \"linkTarget\": \"Resource\",\n                          \"showIcon\": true\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"alertEnabled\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"0\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"\u003e=\",\n                              \"thresholdValue\": \"1\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"incident\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"0\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"\u003e=\",\n                              \"thresholdValue\": \"1\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"maintenance\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"0\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"\u003e=\",\n                              \"thresholdValue\": \"1\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"informational\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"0\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"\u003e=\",\n                              \"thresholdValue\": \"1\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"security\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"0\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"\u003e=\",\n                              \"thresholdValue\": \"1\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                    },\n                    {\n                      \"columnMatch\": \"Subscription\",\n                      \"formatter\": 13,\n                      \"formatOptions\": {\n                        \"linkTarget\": \"Resource\",\n                        \"showIcon\": true\n                      }\n                      }\n                    ],\n                    \"rowLimit\": 10000,\n                    \"labelSettings\": [\n                      {\n                        \"columnId\": \"subscriptionId\",\n                        \"label\": \"Subscription\"\n                      },\n                      {\n                        \"columnId\": \"alertEnabled\",\n                        \"label\": \"Alert Enabled\"\n                      },\n                      {\n                        \"columnId\": \"incident\",\n                    \"label\": \"Service Issues\"\n                      },\n                      {\n                        \"columnId\": \"maintenance\",\n                    \"label\": \"Planned Maintenance\"\n                      },\n                      {\n                        \"columnId\": \"informational\",\n                    \"label\": \"Health Advisories\"\n                      },\n                      {\n                        \"columnId\": \"security\",\n                    \"label\": \"Security Advisories\"\n                      }\n                    ]\n                  }\n                },\n                \"name\": \"Aggregate Summary by Subscription\"\n              },\n              {\n                \"type\": 1,\n                \"content\": {\n                  \"json\": \"The below list includes only subscriptions for which alerts are configured. Subscription details won't be listed if no alerts has been configured. \\r\\n\\r\\nPlease refer above section in this page (**Service Health Alert Configuration Summary by Subscription**) to get summary of alerts for all subscriptons you have access to.\",\n                  \"style\": \"info\"\n                },\n                \"name\": \"text - 4\"\n              },\n              {\n                \"type\": 3,\n                \"content\": {\n                  \"version\": \"KqlItem/1.0\",\n                  \"query\": \"resources\\n| where type == \\\"microsoft.insights/activitylogalerts\\\"\\n| mv-expand category = properties.condition.allOf\\n| extend category = category.equals, alertEnabled = properties.enabled\\n| where category == \\\"ServiceHealth\\\"\\n| extend incidentType = iff(isnull(properties.condition.allOf[1]), \\\"All\\\", properties.condition.allOf)\\n| extend incident = iff(incidentType contains \\\"Incident\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n| extend maintenance = iff(incidentType contains \\\"Maintenance\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n| extend informational = iff(incidentType contains \\\"Informational\\\" or incidentType contains \\\"ActionRequired\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n| extend security = iff(incidentType contains \\\"Security\\\" or incidentType == \\\"All\\\", \\\"true\\\", \\\"false\\\")\\n| project id, name, subscriptionId, category, alertEnabled, incident, maintenance, informational, security\",\n                  \"size\": 1,\n                  \"title\": \"Service Health Alert Configuration Details for Configured Subscriptions\",\n                  \"noDataMessage\": \"No service alerts have been configured for any of the subscriptions\",\n                  \"noDataMessageStyle\": 4,\n                  \"showExportToExcel\": true,\n                  \"queryType\": 1,\n                  \"resourceType\": \"microsoft.resourcegraph/resources\",\n                  \"crossComponentResources\": [\n                    \"{Subscriptions}\"\n                  ],\n                  \"gridSettings\": {\n                    \"formatters\": [\n                      {\n                        \"columnMatch\": \"$gen_group\",\n                      \"formatter\": 13,\n                        \"formatOptions\": {\n                        \"linkTarget\": \"Resource\",\n                          \"showIcon\": true\n                        }\n                      },\n                      {\n                      \"columnMatch\": \"Subscription\",\n                      \"formatter\": 13,\n                      \"formatOptions\": {\n                        \"linkTarget\": \"Resource\",\n                        \"showIcon\": true\n                      }\n                    },\n                    {\n                      \"columnMatch\": \"id\",\n                      \"formatter\": 5\n                    },\n                    {\n                        \"columnMatch\": \"name\",\n                        \"formatter\": 5\n                      },\n                      {\n                        \"columnMatch\": \"subscriptionId\",\n                        \"formatter\": 5\n                      },\n                      {\n                    \"columnMatch\": \"category\",\n                    \"formatter\": 1\n                  },\n                  {\n                        \"columnMatch\": \"alertEnabled\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"true\",\n                              \"representation\": \"success\",\n                              \"text\": \"Enabled\"\n                            },\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"false\",\n                              \"representation\": \"2\",\n                              \"text\": \"Not enabled\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"Unknown\",\n                              \"text\": \"Unknown\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"incident\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"true\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"false\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"maintenance\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"true\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"false\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"informational\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"true\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"false\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                        \"columnMatch\": \"security\",\n                        \"formatter\": 18,\n                        \"formatOptions\": {\n                          \"thresholdsOptions\": \"icons\",\n                          \"thresholdsGrid\": [\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"true\",\n                              \"representation\": \"success\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"==\",\n                              \"thresholdValue\": \"false\",\n                              \"representation\": \"2\",\n                              \"text\": \"{0}{1}\"\n                            },\n                            {\n                              \"operator\": \"Default\",\n                              \"thresholdValue\": null,\n                              \"representation\": \"unknown\",\n                              \"text\": \"{0}{1}\"\n                            }\n                          ]\n                        }\n                      },\n                      {\n                      \"columnMatch\": \"incidentType\",\n                      \"formatter\": 5\n                      }\n                    ],\n                    \"rowLimit\": 10000,\n                    \"hierarchySettings\": {\n                      \"treeType\": 1,\n                      \"groupBy\": [\n                        \"subscriptionId\"\n                    ],\n                    \"finalBy\": \"id\"\n                    },\n                    \"labelSettings\": [\n                      {\n                        \"columnId\": \"id\",\n                        \"label\": \"Alert Id\"\n                      },\n                      {\n                        \"columnId\": \"name\",\n                        \"label\": \"Alert Name\"\n                      },\n                      {\n                        \"columnId\": \"subscriptionId\",\n                        \"label\": \"Subscription\"\n                      },\n                      {\n                        \"columnId\": \"category\",\n                        \"label\": \"Category\"\n                      },\n                      {\n                        \"columnId\": \"alertEnabled\",\n                        \"label\": \"Alert Enabled\"\n                      },\n                      {\n                        \"columnId\": \"incident\",\n                    \"label\": \"Service Issues\"\n                      },\n                      {\n                        \"columnId\": \"maintenance\",\n                    \"label\": \"Planned Maintenance\"\n                      },\n                      {\n                        \"columnId\": \"informational\",\n                    \"label\": \"Health Advisories\"\n                      },\n                      {\n                        \"columnId\": \"security\",\n                    \"label\": \"Security Advisories\"\n                      }\n                    ]\n                  }\n                },\n                \"showPin\": false,\n                \"name\": \"query - 1\"\n              }\n            ]\n          },\n          \"name\": \"Service Alerts Item Group\"\n        }\n    ]\n}"
    }
  }
}
